<!DOCTYPE html>
<html lang="pt">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>PingLee - Tutor de Mandarim</title>
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#007aff">
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/modules.css">
    <link rel="icon" href="images/favicon.png">
</head>

<body>
    <div class="mobile-layout-wrapper">
        <main>
            <!-- M√≥dulo de Chat Principal (Texto) -->
            <section id="chat">
                <div class="section-header">
                    <h1>Chat</h1>
                    <p class="section-sub">Conversa guiada ou explora√ß√£o livre.</p>
                </div>
                <div class="chat-toolbar">
                    <div class="chat-mode-switch" role="group" aria-label="Modo de chat">
                        <button type="button" class="mode-btn is-active" data-mode="aulas" aria-pressed="true">Aulas</button>
                        <button type="button" class="mode-btn" data-mode="explora" aria-pressed="false">Explora</button>
                    </div>
                    <div class="chat-toolbar-actions">
                        <button type="button" class="icon-pill save-lesson-btn" aria-label="Guardar como nota" title="Guardar nota">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                <path d="M5 3h11l3 3v12a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3Z"/>
                                <path d="M9 3v5h6V3"/>
                                <path d="M7 15h10"/>
                            </svg>
                        </button>
                        <button type="button" class="icon-pill reset-chat-btn" aria-label="Reiniciar chat" title="Limpar conversa">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                <path d="M4 16.5 16.5 4 20 7.5 7.5 20a4 4 0 0 1-5.5 0l-0.5-0.5a4 4 0 0 1 0-5.5Z"/>
                                <path d="M15 5l4 4"/>
                            </svg>
                        </button>
                        <button type="button" class="icon-pill" id="audio-slow-toggle" aria-pressed="false"
                            title="Modo √°udio lento">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                <path d="M4 12a6 6 0 0 1 6-6h4a4 4 0 0 1 4 4v2a6 6 0 0 1-6 6H8a4 4 0 0 1-4-4Z"/>
                                <path d="M14 6a2 2 0 1 1 4 0v1"/>
                                <path d="M6 12a2 2 0 1 0 4 0"/>
                                <path d="M10 14v2"/>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="chat-messages"></div>
                <div class="chat-form-container">
                    <form class="chat-form text-form">
                        <textarea class="message-input" rows="1" placeholder="Escreva a sua mensagem..."
                            autocomplete="off" lang="zh-Hans" inputmode="text" autocorrect="off" autocapitalize="none" spellcheck="false"></textarea>
                        <button type="submit" class="send-button" aria-label="Enviar" disabled>
                            <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24">
                                <path
                                    d="M120-160v-640l760 320-760 320Zm80-120 474-200-474-200v140l240 60-240 60v140Zm0 0v-400 400Z" />
                            </svg>
                        </button>
                    </form>
                </div>
            </section>

            <!-- M√≥dulo de Role-Play (Voz) -->
            <section id="role-play">
                <div class="section-header">
                    <h1>Role-Play</h1>
                    <p class="section-sub">Pr√°tica de cen√°rios reais com voz.</p>
                </div>
                <div class="scenario-list-container">
                    <div class="scenario-list">
                        <button class="scenario-button" data-scenario="restaurant">
                            <img src="/images/roleplay_restaurante.png" alt="Restaurante" loading="lazy">
                        </button>
                        <button class="scenario-button" data-scenario="shopping">
                            <img src="/images/roleplay_compras.png" alt="Compras" loading="lazy">
                        </button>
                        <button class="scenario-button" data-scenario="introductions">
                            <img src="/images/roleplay_apresentacao.png" alt="Apresenta√ß√µes" loading="lazy">
                        </button>
                        <button class="scenario-button" data-scenario="taxi">
                            <img src="/images/roleplay_taxi.png" alt="T√°xi" loading="lazy">
                        </button>
                    </div>
                </div>

                <!-- Modal de Role-Play (intera√ß√£o decorre aqui) -->
                <div id="role-play-modal" class="modal-overlay hidden">
                    <div class="modal-content role-modal">
                        <div class="role-modal-header">
                            <div></div>
                            <div class="role-modal-actions">
                                <button type="button" class="pill-toggle" id="roleplay-audio-slow-toggle"
                                    aria-pressed="false" title="Modo √°udio lento">üêå</button>
                                <button class="role-modal-close" aria-label="Fechar role-play">‚úï</button>
                            </div>
                        </div>
                        <div class="role-modal-body">
                            <div class="chat-messages role-modal-messages"></div>
                            <div class="role-play-controls modal-controls">
                                <button type="button" class="mic-button" aria-label="Gravar √°udio">
                                    <img src="/images/mic_icon.png" alt="" class="mic-icon" loading="lazy">
                                    <div class="recording-indicator hidden"></div>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- M√≥dulo de Vocabul√°rio -->
            <section id="vocabulary">
                <div class="section-header">
                    <h1>Vocabul√°rio</h1>
                    <p class="section-sub">Explora e organiza palavras e radicais.</p>
                </div>
                <div class="vocab-header">
                    <div class="vocab-summary-row">
                        <div class="vocab-summary">
                            <div class="metric">
                                <img src="/images/nav_iconsflat_vocab.png" alt="" class="metric-icon" loading="lazy">
                                <div>
                                    <span class="metric-label">Total</span>
                                    <span class="metric-value" id="metric-total">0</span>
                                </div>
                            </div>
                            <button type="button" class="metric metric-button" id="metric-train-btn">
                                <img src="/images/nav_iconsflat_role.png" alt="" class="metric-icon" loading="lazy">
                                <div>
                                    <span class="metric-label">A treinar</span>
                                    <span class="metric-value" id="metric-train">0</span>
                                </div>
                            </button>
                        </div>
                        <button class="add-word-btn" id="open-add-word" aria-label="Adicionar nova palavra">+</button>
                    </div>

                    <div class="vocab-filters">
                        <form id="vocab-search-form" class="vocab-search-form" role="search">
                            <input type="search" id="vocab-search"
                                placeholder="Procurar por caractere, pinyin ou significado..." autocomplete="off"
                                inputmode="search">
                            <button type="submit" hidden aria-hidden="true" tabindex="-1">Pesquisar</button>
                        </form>
                        <select id="vocab-filter-hsk">
                            <option value="">HSK (filtrar)</option>
                            <option value="HSK1">HSK1</option>
                            <option value="HSK2">HSK2</option>
                            <option value="HSK3">HSK3</option>
                            <option value="HSK4">HSK4</option>
                            <option value="HSK5">HSK5</option>
                            <option value="HSK6">HSK6</option>
                            <option value="NA">N/A</option>
                        </select>
                        <select id="vocab-filter-pos">
                            <option value="">Fun√ß√£o (filtrar)</option>
                            <option value="Substantivo">Substantivo</option>
                            <option value="Verbo">Verbo</option>
                            <option value="Adjetivo">Adjetivo</option>
                            <option value="Adv√©rbio">Adv√©rbio</option>
                            <option value="Express√£o">Express√£o</option>
                            <option value="Part√≠cula">Part√≠cula</option>
                            <option value="Classificador">Classificador</option>
                            <option value="Outro">Outro</option>
                        </select>
                    </div>
                </div>

                <div class="vocab-stats" id="vocab-stats">
                    <div class="breadcrumb-row">
                        <button class="back-root-btn" id="vocab-back-root" aria-label="Voltar ao in√≠cio">
                            <svg width="20" height="20" viewBox="0 0 24 24" aria-hidden="true">
                                <path fill="currentColor" d="M12 3 2 12h3v8h6v-5h2v5h6v-8h3z" />
                            </svg>
                        </button>
                        <div class="breadcrumb" id="vocab-breadcrumb"></div>
                    </div>
                </div>
                <div class="vocab-panel" id="vocab-panel"></div>
            </section>

            <!-- M√≥dulo de Aulas -->
            <section id="lessons">
                <div class="section-header">
                    <h1>Aulas</h1>
                    <p class="section-sub">Rev√™ resumos, notas e quizzes.</p>
                </div>
                <div class="lessons-header">
                    <div>
                        <p class="eyebrow">Biblioteca</p>
                        <h2>Aulas & Notas</h2>
                    </div>
                    <div class="lessons-actions">
                        <button type="button" class="add-lesson-btn" id="add-lesson-btn">+ Nova nota</button>
                    </div>
                </div>
                <div class="lessons-body">
                    <div class="lessons-search">
                        <input type="search" id="lessons-search" placeholder="Procurar notas, t√≠tulos ou palavras-chave...">
                    </div>
                    <div class="lessons-list" id="lessons-list"></div>
                    <div class="lessons-empty" id="lessons-empty">Seleciona ou cria uma nota para rever o que aprendeste no chat ou no role-play.</div>
                </div>
            </section>
        </main>

        <nav class="mobile-nav">
            <a href="#chat" class="nav-item active" data-target="chat">
                <img src="/images/nav_iconsflat_chat.png" alt="Chat" loading="lazy">
                <span>Chat</span>
            </a>
            <a href="#role-play" class="nav-item" data-target="role-play">
                <img src="/images/nav_iconsflat_role.png" alt="Role-Play" loading="lazy">
                <span>Role-Play</span>
            </a>
            <a href="#vocabulary" class="nav-item" data-target="vocabulary">
                <img src="/images/nav_iconsflat_vocab.png" alt="Vocabul√°rio" loading="lazy">
                <span>Vocabul√°rio</span>
            </a>
            <a href="#lessons" class="nav-item" data-target="lessons">
                <img src="/images/nav_iconsflat_lessons.png" alt="Aulas" loading="lazy">
                <span>Aulas</span>
            </a>
        </nav>
    </div>

    <!-- Modal de Detalhe de Palavra -->
    <div id="word-modal" class="modal-overlay hidden">
        <div class="modal-content word-modal">
            <div class="word-modal-header">
            </div>
            <div id="word-modal-body"></div>
        </div>
    </div>

    <!-- Modal de Adicionar/Editar Palavra -->
    <div id="word-form-modal" class="modal-overlay hidden">
        <div class="modal-content word-modal">
            <div class="word-modal-header">
                <h3 id="form-modal-title">Adicionar Palavra</h3>
                <button type="button" class="word-form-close" aria-label="Fechar">‚úï</button>
            </div>
            <form id="word-form">
                <input type="hidden" id="word-id-input">

                <div class="form-row triple">
                    <div class="form-group">
                        <label for="character-input">Caracteres</label>
                        <input type="text" id="character-input" required lang="zh-Hans" inputmode="text" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false">
                    </div>
                    <div class="form-group">
                        <label for="pinyin-input">Pinyin</label>
                        <input type="text" id="pinyin-input" required lang="en" inputmode="latin" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false">
                    </div>
                    <div class="form-group compact-action">
                        <label class="visually-hidden" for="ai-fill-btn">Auto</label>
                        <button type="button" id="ai-fill-btn" class="word-btn">Auto</button>
                    </div>
                </div>

                <div class="form-row triple">
                    <div class="form-group">
                        <label for="translation-input">Significado</label>
                        <input type="text" id="translation-input" required lang="pt" inputmode="text" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false">
                    </div>
                    <div class="form-group">
                        <label for="hsk-input">HSK</label>
                        <input type="text" id="hsk-input" placeholder="HSK1, HSK2, N/A..." lang="en" inputmode="text" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false">
                    </div>
                    <div class="form-group">
                        <label for="pos-input">Fun√ß√£o</label>
                        <input type="text" id="pos-input" placeholder="Substantivo, Verbo..." lang="pt"
                            inputmode="text" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false">
                    </div>
                </div>

                <div class="form-row double">
                    <div class="form-group">
                        <label for="example-chinese-input">Exemplo</label>
                        <input type="text" id="example-chinese-input" lang="zh-Hans" inputmode="text" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false">
                    </div>
                    <div class="form-group">
                        <label for="example-translation-input">Tradu√ß√£o</label>
                        <input type="text" id="example-translation-input" lang="pt" inputmode="text" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false">
                    </div>
                </div>

                <div class="form-group notes-group">
                    <label for="notes-input" class="visually-hidden">Notas</label>
                    <textarea id="notes-input" rows="2" placeholder="Notas" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false"></textarea>
                </div>

                <div class="form-actions">
                    <button type="submit" class="save-btn word-btn">Guardar</button>
                </div>
            </form>
            <div id="vocab-feedback"></div>
        </div>
    </div>

    <!-- Modal de Aulas/Notas -->
    <div id="lesson-modal" class="modal-overlay hidden">
        <div class="modal-content word-modal lesson-modal">
            <div class="lesson-modal-header">
                <div>
                    <p class="eyebrow">Resumo</p>
                    <h3 id="lesson-modal-title">Nova nota</h3>
                </div>
                <div class="lesson-modal-actions">
                    <button type="button" class="lesson-edit-btn" aria-label="Editar nota">‚úé</button>
                    <button type="button" class="lesson-close-btn" aria-label="Fechar">‚úï</button>
                </div>
            </div>
            <form id="lesson-form">
                <input type="hidden" id="lesson-id">
                <div class="form-row double">
                    <div class="form-group">
                        <label for="lesson-title">T√≠tulo</label>
                        <input type="text" id="lesson-title" required placeholder="Ex: Apresenta√ß√µes b√°sicas" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false">
                    </div>
                    <div class="form-group">
                        <label for="lesson-date">Data</label>
                        <input type="date" id="lesson-date" required autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false">
                    </div>
                </div>
                <div class="form-row double">
                    <div class="form-group">
                        <label for="lesson-source">Origem</label>
                        <select id="lesson-source" autocomplete="off" autocorrect="off" autocapitalize="none">
                            <option value="chat">Chat</option>
                            <option value="role-play">Role-Play</option>
                            <option value="manual">Notas</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="lesson-words">Palavras-chave</label>
                        <input type="text" id="lesson-words" placeholder="Separadas por v√≠rgula" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false">
                    </div>
                </div>
                <div class="form-group">
                    <label for="lesson-notes">Notas</label>
                    <textarea id="lesson-notes" rows="6" placeholder="Resumo do que praticaste ou aprendeste." autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false"></textarea>
                </div>
                <div class="lesson-quiz"></div>
                <div class="lesson-actions">
                    <button type="button" class="lesson-btn ghost" id="lesson-cancel">Cancelar</button>
                    <button type="submit" class="lesson-btn primary" id="lesson-save">Guardar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Scripts -->
    <script src="data/vocabulary_data.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/app.js"></script>
</body>

</html>
